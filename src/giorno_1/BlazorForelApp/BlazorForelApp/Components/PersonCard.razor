@* Componente personalizzato che mostra una carta con informazioni di una persona *@

<div class="card" style="width: 18rem; margin: 10px;">
    <div class="card-header bg-primary text-white">
        <h5 class="card-title mb-0">
            <i class="bi bi-person-circle"></i> @Name
        </h5>
    </div>
    <div class="card-body">
        <p class="card-text">
            <strong>Età:</strong> @Age anni<br/>
            <strong>Email:</strong> @Email<br/>
            <strong>Ruolo:</strong> @Role
        </p>
        
        @if (!string.IsNullOrEmpty(Description))
        {
            <p class="card-text">
                <small class="text-muted">@Description</small>
            </p>
        }
        
        <div class="d-flex justify-content-between">
            <button class="btn btn-primary btn-sm" @onclick="OnContactClick">
                <i class="bi bi-envelope"></i> Contatta
            </button>
            <button class="btn btn-outline-secondary btn-sm" @onclick="OnViewProfileClick">
                <i class="bi bi-eye"></i> Profilo
            </button>
        </div>
        
        @if (ShowClickCount)
        {
            <div class="mt-2">
                <small class="text-info">Clic ricevuti: @clickCount</small>
            </div>
        }
    </div>
</div>

@code {
    // Parametri del componente (proprietà che possono essere passate dal parent)
    [Parameter] public List<string> IsTest { get; set; }
    [Parameter] public string Name { get; set; } = "Nome non specificato";
    [Parameter] public int Age { get; set; } = 0;
    [Parameter] public string Email { get; set; } = "";
    [Parameter] public string Role { get; set; } = "Ruolo non specificato";
    [Parameter] public string Description { get; set; } = "";
    [Parameter] public bool ShowClickCount { get; set; } = false;
    
    // Eventi che il componente può scatenare
    [Parameter] public EventCallback<string> OnContact { get; set; }
    [Parameter] public EventCallback<string> OnViewProfile { get; set; }
    
    // Stato interno del componente
    private int clickCount = 0;
    
    // Metodi privati del componente
    private async Task OnContactClick()
    {
        clickCount++;
        await OnContact.InvokeAsync($"Contatto richiesto per {Name}");
    }
    
    private async Task OnViewProfileClick()
    {
        clickCount++;
        await OnViewProfile.InvokeAsync($"Visualizzazione profilo di {Name}");
    }
}